2025-07-29 23:21:34.835 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:21:35.037 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:21:35.051 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 23:21:35.064 +03:00 [INF] Applying migration '20250729202124_AddLogEntries'.
2025-07-29 23:21:35.118 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "LogEntries" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Timestamp" timestamp with time zone NOT NULL,
    "Level" character varying(50) NOT NULL,
    "Message" character varying(255) NOT NULL,
    "Source" character varying(100) NULL,
    "UserId" character varying(100) NULL,
    "UserEmail" character varying(100) NULL,
    "TenantId" character varying(50) NULL,
    "RequestPath" character varying(255) NULL,
    "RequestMethod" character varying(20) NULL,
    "IpAddress" character varying(45) NULL,
    "Exception" character varying(500) NULL,
    "AdditionalData" character varying(1000) NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_LogEntries" PRIMARY KEY ("Id")
);
2025-07-29 23:21:35.126 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Tenants" SET "SubscriptionStartDate" = TIMESTAMPTZ '2025-07-29 20:21:24.361158Z'
WHERE "Id" = 1;
2025-07-29 23:21:35.128 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250729202124_AddLogEntries', '7.0.11');
2025-07-29 23:24:15.845 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:24:15.934 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:24:15.948 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 23:24:15.962 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 23:24:15.981 +03:00 [INF] User profile is available. Using 'C:\Users\ataka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 23:24:16.011 +03:00 [FTL] Application startup exception
System.InvalidOperationException: Cannot resolve scoped service 'ElectricityTrackerAPI.Services.ILogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2025-07-29 23:24:16.025 +03:00 [ERR] Hosting failed to start
System.InvalidOperationException: Cannot resolve scoped service 'ElectricityTrackerAPI.Services.ILogService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.ReflectionMiddlewareBinder.CreateMiddleware(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__14_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-07-29 23:28:34.304 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:28:34.391 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:28:34.405 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 23:28:34.417 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 23:28:34.432 +03:00 [INF] User profile is available. Using 'C:\Users\ataka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 23:28:34.470 +03:00 [WRN] Overriding address(es) 'http://localhost:5143'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-07-29 23:28:34.476 +03:00 [INF] Now listening on: http://localhost:5143
2025-07-29 23:28:34.478 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-29 23:28:34.479 +03:00 [INF] Hosting environment: Development
2025-07-29 23:28:34.480 +03:00 [INF] Content root path: C:\Users\ataka\Desktop\ElectricityTracker\TrackerAPI
2025-07-29 23:29:06.742 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:29:06.782 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-29 23:29:06.784 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:29:06.790 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 49.383ms
2025-07-29 23:29:06.800 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 70
2025-07-29 23:29:06.809 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:29:06.844 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:29:06.860 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:29:07.140 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:29:07.576 +03:00 [WRN] Failed login attempt - Email: admin@example.com
2025-07-29 23:29:07.674 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:29:07.692 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-29 23:29:07.704 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 837.9436ms
2025-07-29 23:29:07.707 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:29:07.712 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 401 null application/json; charset=utf-8 911.7318ms
2025-07-29 23:30:07.523 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:30:07.527 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:30:07.529 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 4.9825ms
2025-07-29 23:30:07.533 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 69
2025-07-29 23:30:07.536 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:30:07.539 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:30:07.540 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:30:07.613 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:30:07.922 +03:00 [WRN] Failed login attempt - Email: admin@example.com
2025-07-29 23:30:07.926 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:30:07.929 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-29 23:30:07.931 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 389.1634ms
2025-07-29 23:30:07.933 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:30:07.935 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 401 null application/json; charset=utf-8 402.0169ms
2025-07-29 23:30:38.597 +03:00 [INF] Application is shutting down...
2025-07-29 23:30:54.071 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
REVOKE CONNECT ON DATABASE "ElectricityTrackerDB" FROM PUBLIC;
SELECT pg_terminate_backend(pg_stat_activity.pid) FROM pg_stat_activity WHERE datname = 'ElectricityTrackerDB';
2025-07-29 23:30:54.169 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "ElectricityTrackerDB";
2025-07-29 23:31:04.410 +03:00 [INF] Executed DbCommand (192ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "ElectricityTrackerDB";
2025-07-29 23:31:04.632 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-29 23:31:04.694 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:31:04.700 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 23:31:04.711 +03:00 [INF] Applying migration '20250729200228_InitialCreate'.
2025-07-29 23:31:04.764 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Tenants" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "CompanyName" character varying(100) NOT NULL,
    "ContactPerson" character varying(100) NOT NULL,
    "Email" character varying(100) NOT NULL,
    "Phone" character varying(20) NOT NULL,
    "Address" character varying(200) NULL,
    "TaxNumber" character varying(50) NULL,
    "TaxOffice" character varying(50) NULL,
    "Subdomain" character varying(50) NULL,
    "CustomDomain" character varying(100) NULL,
    "Status" integer NOT NULL,
    "SubscriptionStartDate" timestamp with time zone NOT NULL,
    "SubscriptionEndDate" timestamp with time zone NULL,
    "MaxUsers" integer NOT NULL,
    "MaxFacilities" integer NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NULL,
    CONSTRAINT "PK_Tenants" PRIMARY KEY ("Id")
);
2025-07-29 23:31:04.773 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Departments" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(100) NOT NULL,
    "Description" character varying(500) NULL,
    "ManagerName" character varying(100) NULL,
    "ManagerEmail" character varying(100) NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NULL,
    "TenantId" integer NOT NULL,
    CONSTRAINT "PK_Departments" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Departments_Tenants_TenantId" FOREIGN KEY ("TenantId") REFERENCES "Tenants" ("Id") ON DELETE RESTRICT
);
2025-07-29 23:31:04.778 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Facilities" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Name" character varying(100) NOT NULL,
    "Address" character varying(200) NULL,
    "FacilityCode" character varying(50) NULL,
    "Type" integer NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NULL,
    "TenantId" integer NOT NULL,
    "DepartmentId" integer NULL,
    CONSTRAINT "PK_Facilities" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Facilities_Departments_DepartmentId" FOREIGN KEY ("DepartmentId") REFERENCES "Departments" ("Id") ON DELETE SET NULL,
    CONSTRAINT "FK_Facilities_Tenants_TenantId" FOREIGN KEY ("TenantId") REFERENCES "Tenants" ("Id") ON DELETE RESTRICT
);
2025-07-29 23:31:04.784 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "FirstName" character varying(100) NOT NULL,
    "LastName" character varying(100) NOT NULL,
    "Email" character varying(100) NOT NULL,
    "PasswordHash" character varying(255) NOT NULL,
    "Phone" character varying(20) NULL,
    "Role" integer NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NULL,
    "LastLoginAt" timestamp with time zone NULL,
    "TenantId" integer NOT NULL,
    "DepartmentId" integer NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Users_Departments_DepartmentId" FOREIGN KEY ("DepartmentId") REFERENCES "Departments" ("Id") ON DELETE SET NULL,
    CONSTRAINT "FK_Users_Tenants_TenantId" FOREIGN KEY ("TenantId") REFERENCES "Tenants" ("Id") ON DELETE RESTRICT
);
2025-07-29 23:31:04.792 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ElectricityMeters" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "MeterNumber" character varying(50) NOT NULL,
    "Description" character varying(100) NULL,
    "Type" integer NOT NULL,
    "CurrentReading" numeric NOT NULL,
    "PreviousReading" numeric NOT NULL,
    "LastReadingDate" timestamp with time zone NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NULL,
    "TenantId" integer NOT NULL,
    "FacilityId" integer NOT NULL,
    CONSTRAINT "PK_ElectricityMeters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_ElectricityMeters_Facilities_FacilityId" FOREIGN KEY ("FacilityId") REFERENCES "Facilities" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_ElectricityMeters_Tenants_TenantId" FOREIGN KEY ("TenantId") REFERENCES "Tenants" ("Id") ON DELETE RESTRICT
);
2025-07-29 23:31:04.799 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ConsumptionRecords" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "ReadingDate" timestamp with time zone NOT NULL,
    "CurrentReading" numeric NOT NULL,
    "PreviousReading" numeric NOT NULL,
    "Consumption" numeric NOT NULL,
    "UnitPrice" numeric NOT NULL,
    "TotalCost" numeric NOT NULL,
    "Source" integer NOT NULL,
    "Notes" text NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NULL,
    "TenantId" integer NOT NULL,
    "ElectricityMeterId" integer NOT NULL,
    CONSTRAINT "PK_ConsumptionRecords" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_ConsumptionRecords_ElectricityMeters_ElectricityMeterId" FOREIGN KEY ("ElectricityMeterId") REFERENCES "ElectricityMeters" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_ConsumptionRecords_Tenants_TenantId" FOREIGN KEY ("TenantId") REFERENCES "Tenants" ("Id") ON DELETE RESTRICT
);
2025-07-29 23:31:04.802 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Tenants" ("Id", "Address", "CompanyName", "ContactPerson", "CreatedAt", "CustomDomain", "Email", "IsActive", "MaxFacilities", "MaxUsers", "Phone", "Status", "Subdomain", "SubscriptionEndDate", "SubscriptionStartDate", "TaxNumber", "TaxOffice", "UpdatedAt")
VALUES (1, 'İstanbul, Türkiye', 'Demo Şirketi A.Ş.', 'Ahmet Yılmaz', TIMESTAMPTZ '2024-01-01 00:00:00Z', NULL, 'info@demosirketi.com', TRUE, 5, 10, '+90 212 555 0123', 0, NULL, NULL, TIMESTAMPTZ '2025-07-29 20:02:27.926878Z', '1234567890', 'Kadıköy', NULL);
2025-07-29 23:31:04.805 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Departments" ("Id", "CreatedAt", "Description", "IsActive", "ManagerEmail", "ManagerName", "Name", "TenantId", "UpdatedAt")
VALUES (1, TIMESTAMPTZ '2024-01-01 00:00:00Z', 'Şirket genel yönetim departmanı', TRUE, 'ahmet@demosirketi.com', 'Ahmet Yılmaz', 'Genel Yönetim', 1, NULL);
2025-07-29 23:31:04.808 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Facilities" ("Id", "Address", "CreatedAt", "DepartmentId", "FacilityCode", "IsActive", "Name", "TenantId", "Type", "UpdatedAt")
VALUES (1, 'Kadıköy, İstanbul', TIMESTAMPTZ '2024-01-01 00:00:00Z', 1, 'OFIS001', TRUE, 'Ana Ofis', 1, 0, NULL);
2025-07-29 23:31:04.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "CreatedAt", "DepartmentId", "Email", "FirstName", "IsActive", "LastLoginAt", "LastName", "PasswordHash", "Phone", "Role", "TenantId", "UpdatedAt")
VALUES (1, TIMESTAMPTZ '2024-01-01 00:00:00Z', 1, 'admin@example.com', 'Admin', TRUE, NULL, 'User', '$2a$11$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewdBPj4J/HS.iK2O', NULL, 0, 1, NULL);
2025-07-29 23:31:04.814 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ElectricityMeters" ("Id", "CreatedAt", "CurrentReading", "Description", "FacilityId", "IsActive", "LastReadingDate", "MeterNumber", "PreviousReading", "TenantId", "Type", "UpdatedAt")
VALUES (1, TIMESTAMPTZ '2024-01-01 00:00:00Z', 1500.5, 'Ana ofis elektrik sayacı', 1, TRUE, TIMESTAMPTZ '2023-12-31 00:00:00Z', 'MTR001', 1400.0, 1, 0, NULL);
2025-07-29 23:31:04.817 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ConsumptionRecords_ElectricityMeterId" ON "ConsumptionRecords" ("ElectricityMeterId");
2025-07-29 23:31:04.820 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ConsumptionRecords_TenantId_ElectricityMeterId_ReadingDate" ON "ConsumptionRecords" ("TenantId", "ElectricityMeterId", "ReadingDate");
2025-07-29 23:31:04.823 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Departments_TenantId_Name" ON "Departments" ("TenantId", "Name");
2025-07-29 23:31:04.826 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ElectricityMeters_FacilityId" ON "ElectricityMeters" ("FacilityId");
2025-07-29 23:31:04.829 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_ElectricityMeters_TenantId_MeterNumber" ON "ElectricityMeters" ("TenantId", "MeterNumber");
2025-07-29 23:31:04.833 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Facilities_DepartmentId" ON "Facilities" ("DepartmentId");
2025-07-29 23:31:04.835 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Facilities_TenantId_FacilityCode" ON "Facilities" ("TenantId", "FacilityCode");
2025-07-29 23:31:04.838 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Tenants_Email" ON "Tenants" ("Email");
2025-07-29 23:31:04.842 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Tenants_TaxNumber" ON "Tenants" ("TaxNumber");
2025-07-29 23:31:04.844 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Users_DepartmentId" ON "Users" ("DepartmentId");
2025-07-29 23:31:04.848 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Users_Email" ON "Users" ("Email");
2025-07-29 23:31:04.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Users_TenantId" ON "Users" ("TenantId");
2025-07-29 23:31:04.856 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT setval(
    pg_get_serial_sequence('"Tenants"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Tenants") + 1,
        nextval(pg_get_serial_sequence('"Tenants"', 'Id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('"Departments"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Departments") + 1,
        nextval(pg_get_serial_sequence('"Departments"', 'Id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('"Facilities"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Facilities") + 1,
        nextval(pg_get_serial_sequence('"Facilities"', 'Id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('"Users"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "Users") + 1,
        nextval(pg_get_serial_sequence('"Users"', 'Id'))),
    false);
SELECT setval(
    pg_get_serial_sequence('"ElectricityMeters"', 'Id'),
    GREATEST(
        (SELECT MAX("Id") FROM "ElectricityMeters") + 1,
        nextval(pg_get_serial_sequence('"ElectricityMeters"', 'Id'))),
    false);
2025-07-29 23:31:04.859 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250729200228_InitialCreate', '7.0.11');
2025-07-29 23:31:04.883 +03:00 [INF] Applying migration '20250729202124_AddLogEntries'.
2025-07-29 23:31:04.909 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "LogEntries" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Timestamp" timestamp with time zone NOT NULL,
    "Level" character varying(50) NOT NULL,
    "Message" character varying(255) NOT NULL,
    "Source" character varying(100) NULL,
    "UserId" character varying(100) NULL,
    "UserEmail" character varying(100) NULL,
    "TenantId" character varying(50) NULL,
    "RequestPath" character varying(255) NULL,
    "RequestMethod" character varying(20) NULL,
    "IpAddress" character varying(45) NULL,
    "Exception" character varying(500) NULL,
    "AdditionalData" character varying(1000) NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_LogEntries" PRIMARY KEY ("Id")
);
2025-07-29 23:31:04.914 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Tenants" SET "SubscriptionStartDate" = TIMESTAMPTZ '2025-07-29 20:21:24.361158Z'
WHERE "Id" = 1;
2025-07-29 23:31:04.917 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250729202124_AddLogEntries', '7.0.11');
2025-07-29 23:31:57.719 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:31:57.810 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:31:57.827 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 23:31:57.839 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 23:31:57.855 +03:00 [INF] User profile is available. Using 'C:\Users\ataka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 23:31:57.898 +03:00 [WRN] Overriding address(es) 'http://localhost:5143'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-07-29 23:31:57.905 +03:00 [INF] Now listening on: http://localhost:5143
2025-07-29 23:31:57.906 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-29 23:31:57.908 +03:00 [INF] Hosting environment: Development
2025-07-29 23:31:57.909 +03:00 [INF] Content root path: C:\Users\ataka\Desktop\ElectricityTracker\TrackerAPI
2025-07-29 23:32:14.292 +03:00 [INF] Application is shutting down...
2025-07-29 23:32:25.487 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:32:25.586 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:32:25.602 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 23:32:25.615 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 23:32:25.631 +03:00 [INF] User profile is available. Using 'C:\Users\ataka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 23:32:25.677 +03:00 [WRN] Overriding address(es) 'http://localhost:5143'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-07-29 23:32:25.681 +03:00 [INF] Now listening on: http://localhost:5143
2025-07-29 23:32:25.682 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-29 23:32:25.683 +03:00 [INF] Hosting environment: Development
2025-07-29 23:32:25.685 +03:00 [INF] Content root path: C:\Users\ataka\Desktop\ElectricityTracker\TrackerAPI
2025-07-29 23:32:27.604 +03:00 [INF] Application is shutting down...
2025-07-29 23:32:47.825 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:32:47.912 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-07-29 23:32:47.926 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-29 23:32:47.938 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-29 23:32:47.955 +03:00 [INF] User profile is available. Using 'C:\Users\ataka\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-29 23:32:47.999 +03:00 [WRN] Overriding address(es) 'http://localhost:5143'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-07-29 23:32:48.005 +03:00 [INF] Now listening on: http://localhost:5143
2025-07-29 23:32:48.006 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-29 23:32:48.007 +03:00 [INF] Hosting environment: Development
2025-07-29 23:32:48.008 +03:00 [INF] Content root path: C:\Users\ataka\Desktop\ElectricityTracker\TrackerAPI
2025-07-29 23:32:54.818 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 70
2025-07-29 23:32:54.853 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-29 23:32:54.879 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:32:54.892 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:32:55.156 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:32:55.558 +03:00 [WRN] Failed login attempt - Email: admin@example.com
2025-07-29 23:32:55.647 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:32:55.665 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-29 23:32:55.676 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 778.9698ms
2025-07-29 23:32:55.681 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:32:55.688 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 401 null application/json; charset=utf-8 872.1036ms
2025-07-29 23:33:06.742 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/tenant/register - application/json 222
2025-07-29 23:33:06.749 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.TenantController.RegisterTenant (TrackerAPI)'
2025-07-29 23:33:06.753 +03:00 [INF] Route matched with {action = "RegisterTenant", controller = "Tenant"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterTenant(ElectricityTrackerAPI.DTOs.TenantRegistrationDto) on controller ElectricityTrackerAPI.Controllers.TenantController (TrackerAPI).
2025-07-29 23:33:06.849 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?', @p10='?' (DbType = Int32), @p11='?', @p12='?' (DbType = DateTime), @p13='?' (DbType = DateTime), @p14='?', @p15='?', @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Tenants" ("Address", "CompanyName", "ContactPerson", "CreatedAt", "CustomDomain", "Email", "IsActive", "MaxFacilities", "MaxUsers", "Phone", "Status", "Subdomain", "SubscriptionEndDate", "SubscriptionStartDate", "TaxNumber", "TaxOffice", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16)
RETURNING "Id";
2025-07-29 23:33:07.181 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("CreatedAt", "DepartmentId", "Email", "FirstName", "IsActive", "LastLoginAt", "LastName", "PasswordHash", "Phone", "Role", "TenantId", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
2025-07-29 23:33:07.188 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`3[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-29 23:33:07.192 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.TenantController.RegisterTenant (TrackerAPI) in 436.9938ms
2025-07-29 23:33:07.193 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.TenantController.RegisterTenant (TrackerAPI)'
2025-07-29 23:33:07.194 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/tenant/register - 200 null application/json; charset=utf-8 452.2229ms
2025-07-29 23:33:14.094 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 72
2025-07-29 23:33:14.099 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:33:14.100 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:33:14.106 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:33:14.260 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "Id" = @p1;
2025-07-29 23:33:14.264 +03:00 [INF] User Activity: Login successful - User: testadmin@example.com
2025-07-29 23:33:14.267 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:33:14.284 +03:00 [INF] Executing OkObjectResult, writing value of type 'ElectricityTrackerAPI.DTOs.LoginResponseDto'.
2025-07-29 23:33:14.292 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 190.3081ms
2025-07-29 23:33:14.293 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:33:14.294 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 200 null application/json; charset=utf-8 200.2256ms
2025-07-29 23:33:35.235 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 70
2025-07-29 23:33:35.238 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:33:35.240 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:33:35.244 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:33:35.377 +03:00 [WRN] Failed login attempt - Email: admin@example.com
2025-07-29 23:33:35.398 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:33:35.401 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-29 23:33:35.402 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 160.6964ms
2025-07-29 23:33:35.404 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:33:35.405 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 401 null application/json; charset=utf-8 169.8464ms
2025-07-29 23:34:25.078 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:34:25.084 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:34:25.086 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 7.6322ms
2025-07-29 23:34:25.094 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 69
2025-07-29 23:34:25.096 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:34:25.097 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:34:25.099 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:34:25.103 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:34:25.246 +03:00 [WRN] Failed login attempt - Email: admin@example.com
2025-07-29 23:34:25.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:34:25.253 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-29 23:34:25.254 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 153.2234ms
2025-07-29 23:34:25.256 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:34:25.256 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 401 null application/json; charset=utf-8 162.8946ms
2025-07-29 23:34:28.665 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 67
2025-07-29 23:34:28.667 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:34:28.668 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:34:28.669 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:34:28.674 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:34:28.808 +03:00 [WRN] Failed login attempt - Email: admin@example.com
2025-07-29 23:34:28.828 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:34:28.832 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-29 23:34:28.834 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 161.5945ms
2025-07-29 23:34:28.835 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:34:28.836 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 401 null application/json; charset=utf-8 171.7816ms
2025-07-29 23:34:46.538 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:34:46.542 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:34:46.543 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 4.6995ms
2025-07-29 23:34:46.547 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 71
2025-07-29 23:34:46.549 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:34:46.549 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:34:46.550 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:34:46.553 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:34:46.710 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "Id" = @p1;
2025-07-29 23:34:46.713 +03:00 [INF] User Activity: Login successful - User: testadmin@example.com
2025-07-29 23:34:46.716 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:34:46.720 +03:00 [INF] Executing OkObjectResult, writing value of type 'ElectricityTrackerAPI.DTOs.LoginResponseDto'.
2025-07-29 23:34:46.722 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 170.1029ms
2025-07-29 23:34:46.723 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:34:46.724 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 200 null application/json; charset=utf-8 177.2128ms
2025-07-29 23:35:00.195 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:35:00.199 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:35:00.200 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 4.9959ms
2025-07-29 23:35:00.205 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 72
2025-07-29 23:35:00.207 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:35:00.208 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:35:00.209 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:35:00.213 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:35:00.370 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "Id" = @p1;
2025-07-29 23:35:00.374 +03:00 [INF] User Activity: Login successful - User: testadmin@example.com
2025-07-29 23:35:00.376 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:35:00.380 +03:00 [INF] Executing OkObjectResult, writing value of type 'ElectricityTrackerAPI.DTOs.LoginResponseDto'.
2025-07-29 23:35:00.382 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 170.8152ms
2025-07-29 23:35:00.384 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:35:00.386 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 200 null application/json; charset=utf-8 180.3881ms
2025-07-29 23:37:21.670 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:21.673 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:21.674 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 4.0419ms
2025-07-29 23:37:21.677 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:21.684 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:21.710 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:37:21.722 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:37:21.727 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:37:21.732 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:37:21.733 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 55.511ms
2025-07-29 23:37:33.759 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:33.773 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:33.775 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 15.9905ms
2025-07-29 23:37:33.782 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:33.787 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:33.789 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:37:33.794 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:37:33.800 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:37:33.802 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:37:33.804 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 22.3617ms
2025-07-29 23:37:35.740 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:35.744 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:35.746 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:37:35.752 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:37:35.754 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:37:35.756 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:37:35.757 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 16.6275ms
2025-07-29 23:37:35.761 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:35.763 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:35.765 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:37:35.769 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:37:35.771 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:37:35.772 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:37:35.773 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 12.4328ms
2025-07-29 23:37:44.014 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:44.018 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:44.019 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 4.8067ms
2025-07-29 23:37:44.021 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:44.024 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:44.026 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:44.029 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:44.030 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 8.7729ms
2025-07-29 23:37:44.031 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:37:44.038 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:37:44.040 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:37:44.042 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:37:44.043 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 19.2026ms
2025-07-29 23:37:44.047 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:37:44.050 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:37:44.051 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:37:44.055 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:37:44.057 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:37:44.058 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:37:44.060 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 12.9358ms
2025-07-29 23:38:20.092 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:38:20.098 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:38:20.100 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 8.0015ms
2025-07-29 23:38:20.104 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 72
2025-07-29 23:38:20.107 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:38:20.109 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:38:20.111 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:38:20.210 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:38:20.450 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "Id" = @p1;
2025-07-29 23:38:20.458 +03:00 [INF] User Activity: Login successful - User: testadmin@example.com
2025-07-29 23:38:20.463 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:38:20.467 +03:00 [INF] Executing OkObjectResult, writing value of type 'ElectricityTrackerAPI.DTOs.LoginResponseDto'.
2025-07-29 23:38:20.470 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 356.8519ms
2025-07-29 23:38:20.472 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:38:20.474 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 200 null application/json; charset=utf-8 369.7732ms
2025-07-29 23:38:21.969 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:38:21.973 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:38:21.974 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:38:21.978 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:38:21.978 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 9.1386ms
2025-07-29 23:38:21.979 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 5.8932ms
2025-07-29 23:38:21.982 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:38:21.986 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:38:21.988 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:38:21.991 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:38:21.993 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:38:21.994 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:38:21.996 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 13.9505ms
2025-07-29 23:38:21.998 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:38:22.000 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:38:22.002 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:38:22.005 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:38:22.006 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:38:22.007 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:38:22.008 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 9.7232ms
2025-07-29 23:39:29.126 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:39:29.133 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:29.134 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 7.7806ms
2025-07-29 23:39:29.137 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 72
2025-07-29 23:39:29.139 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:29.140 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:39:29.141 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:39:29.144 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:39:29.292 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "Id" = @p1;
2025-07-29 23:39:29.295 +03:00 [INF] User Activity: Login successful - User: testadmin@example.com
2025-07-29 23:39:29.298 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:39:29.302 +03:00 [INF] Executing OkObjectResult, writing value of type 'ElectricityTrackerAPI.DTOs.LoginResponseDto'.
2025-07-29 23:39:29.303 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 160.7374ms
2025-07-29 23:39:29.305 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:39:29.306 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 200 null application/json; charset=utf-8 168.8659ms
2025-07-29 23:39:30.525 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:30.528 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:30.529 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:30.531 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:30.532 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 6.9827ms
2025-07-29 23:39:30.532 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 4.3682ms
2025-07-29 23:39:30.538 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:30.540 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:30.541 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:39:30.545 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:39:30.546 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:39:30.548 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:39:30.549 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 10.9104ms
2025-07-29 23:39:30.553 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:30.555 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:30.556 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:39:30.559 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:39:30.560 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:39:30.561 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:39:30.562 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 9.5946ms
2025-07-29 23:39:46.163 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:46.163 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:46.167 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:46.170 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:46.171 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 8.2576ms
2025-07-29 23:39:46.172 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 9.0007ms
2025-07-29 23:39:46.177 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:46.184 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:46.186 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:39:46.190 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:39:46.192 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:39:46.193 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:39:46.195 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 17.9953ms
2025-07-29 23:39:46.199 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:46.202 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:46.203 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:39:46.208 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:39:46.210 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:39:46.211 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:39:46.213 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 14.2821ms
2025-07-29 23:39:50.560 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:50.563 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:50.564 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:39:50.568 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:39:50.570 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:39:50.572 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:39:50.574 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 14.2015ms
2025-07-29 23:39:50.581 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:50.585 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:50.586 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:39:50.590 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:39:50.592 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:39:50.593 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:39:50.594 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 13.0141ms
2025-07-29 23:39:54.968 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:54.972 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:54.973 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 5.0999ms
2025-07-29 23:39:54.974 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:54.978 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:54.982 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:54.986 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:54.987 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 13.0422ms
2025-07-29 23:39:54.989 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:39:54.998 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:39:55.000 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:39:55.001 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:39:55.003 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 24.994ms
2025-07-29 23:39:55.007 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:39:55.010 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:39:55.011 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:39:55.016 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:39:55.018 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:39:55.019 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:39:55.020 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 12.8743ms
2025-07-29 23:40:00.231 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:40:00.234 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:40:00.234 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:40:00.238 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:40:00.238 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 7.955ms
2025-07-29 23:40:00.239 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 5.7719ms
2025-07-29 23:40:00.243 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:40:00.248 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:40:00.249 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:40:00.253 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:40:00.255 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:40:00.257 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:40:00.258 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 15.387ms
2025-07-29 23:40:00.261 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:40:00.264 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:40:00.265 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:40:00.268 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:40:00.269 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:40:00.270 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:40:00.271 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 10.246ms
2025-07-29 23:40:19.655 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:40:19.657 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:40:19.659 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:40:19.663 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:40:19.664 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 9.106ms
2025-07-29 23:40:19.666 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 8.8107ms
2025-07-29 23:40:19.672 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:40:19.681 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:40:19.682 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:40:19.685 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:40:19.687 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:40:19.688 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:40:19.689 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 17.6314ms
2025-07-29 23:40:19.693 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:40:19.697 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:40:19.698 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:40:19.701 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:40:19.703 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:40:19.704 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:40:19.705 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 11.6435ms
2025-07-29 23:46:12.343 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:46:12.347 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:46:12.437 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:12.442 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:12.443 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 100.2108ms
2025-07-29 23:46:12.446 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 98.7578ms
2025-07-29 23:46:12.478 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:46:12.520 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:12.522 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:46:12.533 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:46:12.536 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:46:12.539 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:46:12.540 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 62.778ms
2025-07-29 23:46:12.548 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:46:12.552 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:12.553 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:46:12.560 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:46:12.563 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:46:12.565 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:46:12.567 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 18.7603ms
2025-07-29 23:46:38.787 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:46:38.790 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:38.791 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 4.4614ms
2025-07-29 23:46:38.796 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 72
2025-07-29 23:46:38.799 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:38.801 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:46:38.803 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:46:38.884 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:46:39.046 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "Id" = @p1;
2025-07-29 23:46:39.050 +03:00 [INF] User Activity: Login successful - User: testadmin@example.com
2025-07-29 23:46:39.054 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:46:39.058 +03:00 [INF] Executing OkObjectResult, writing value of type 'ElectricityTrackerAPI.DTOs.LoginResponseDto'.
2025-07-29 23:46:39.060 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 255.3685ms
2025-07-29 23:46:39.062 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:46:39.065 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 200 null application/json; charset=utf-8 268.4747ms
2025-07-29 23:46:40.326 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:46:40.330 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:46:40.330 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:40.334 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:40.335 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 8.7994ms
2025-07-29 23:46:40.336 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=20 - 204 null null 5.8944ms
2025-07-29 23:46:40.342 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:46:40.351 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:40.352 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:46:40.361 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:46:40.363 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:46:40.365 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:46:40.366 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 24.767ms
2025-07-29 23:46:40.370 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - null null
2025-07-29 23:46:40.374 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:46:40.375 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:46:40.380 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:46:40.382 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:46:40.383 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:46:40.385 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=20 - 401 0 null 14.3424ms
2025-07-29 23:47:13.894 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:47:13.898 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:47:13.899 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - 204 null null 4.9408ms
2025-07-29 23:47:13.900 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:47:13.903 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:47:13.906 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:47:13.908 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:47:13.909 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - 204 null null 8.4563ms
2025-07-29 23:47:13.910 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:47:13.917 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:47:13.919 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:47:13.920 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:47:13.922 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - 401 0 null 18.5797ms
2025-07-29 23:47:13.925 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:47:13.929 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:47:13.930 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:47:13.933 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:47:13.934 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:47:13.935 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:47:13.936 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - 401 0 null 11.2678ms
2025-07-29 23:48:31.454 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:48:31.458 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:48:31.459 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - 204 null null 4.9937ms
2025-07-29 23:48:31.464 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:48:31.467 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:48:31.469 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:48:31.473 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:48:31.474 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:48:31.476 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:48:31.477 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - 401 0 null 13.5565ms
2025-07-29 23:48:31.481 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:48:31.484 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:48:31.487 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:48:31.492 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:48:31.494 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:48:31.495 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:48:31.497 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - 401 0 null 15.4471ms
2025-07-29 23:49:15.067 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:49:15.070 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:49:15.071 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 4.5889ms
2025-07-29 23:49:15.076 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 72
2025-07-29 23:49:15.080 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:49:15.081 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:49:15.083 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:49:15.088 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:49:15.248 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "Id" = @p1;
2025-07-29 23:49:15.252 +03:00 [INF] User Activity: Login successful - User: testadmin@example.com
2025-07-29 23:49:15.254 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:49:15.258 +03:00 [INF] Executing OkObjectResult, writing value of type 'ElectricityTrackerAPI.DTOs.LoginResponseDto'.
2025-07-29 23:49:15.260 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 174.4266ms
2025-07-29 23:49:15.261 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:49:15.263 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 200 null application/json; charset=utf-8 186.6401ms
2025-07-29 23:50:07.476 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - null null
2025-07-29 23:50:07.479 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:50:07.480 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/auth/login - 204 null null 3.5039ms
2025-07-29 23:50:07.483 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5143/api/auth/login - application/json 72
2025-07-29 23:50:07.486 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:50:07.487 +03:00 [INF] Executing endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:50:07.489 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ElectricityTrackerAPI.DTOs.LoginResponseDto]] Login(ElectricityTrackerAPI.DTOs.LoginDto) on controller ElectricityTrackerAPI.Controllers.AuthController (TrackerAPI).
2025-07-29 23:50:07.492 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__loginDto_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."DepartmentId", u."Email", u."FirstName", u."IsActive", u."LastLoginAt", u."LastName", u."PasswordHash", u."Phone", u."Role", u."TenantId", u."UpdatedAt", t."Id", t."Address", t."CompanyName", t."ContactPerson", t."CreatedAt", t."CustomDomain", t."Email", t."IsActive", t."MaxFacilities", t."MaxUsers", t."Phone", t."Status", t."Subdomain", t."SubscriptionEndDate", t."SubscriptionStartDate", t."TaxNumber", t."TaxOffice", t."UpdatedAt"
FROM "Users" AS u
INNER JOIN "Tenants" AS t ON u."TenantId" = t."Id"
WHERE u."Email" = @__loginDto_Email_0 AND u."IsActive"
LIMIT 1
2025-07-29 23:50:07.628 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "LastLoginAt" = @p0
WHERE "Id" = @p1;
2025-07-29 23:50:07.632 +03:00 [INF] User Activity: Login successful - User: testadmin@example.com
2025-07-29 23:50:07.634 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?', @p8='?', @p9='?', @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "LogEntries" ("AdditionalData", "CreatedAt", "Exception", "IpAddress", "Level", "Message", "RequestMethod", "RequestPath", "Source", "TenantId", "Timestamp", "UserEmail", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "Id";
2025-07-29 23:50:07.636 +03:00 [INF] Executing OkObjectResult, writing value of type 'ElectricityTrackerAPI.DTOs.LoginResponseDto'.
2025-07-29 23:50:07.638 +03:00 [INF] Executed action ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI) in 147.3792ms
2025-07-29 23:50:07.640 +03:00 [INF] Executed endpoint 'ElectricityTrackerAPI.Controllers.AuthController.Login (TrackerAPI)'
2025-07-29 23:50:07.641 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5143/api/auth/login - 200 null application/json; charset=utf-8 157.7569ms
2025-07-29 23:51:00.766 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:51:00.770 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:51:00.773 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - 204 null null 7.0219ms
2025-07-29 23:51:00.776 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:51:00.785 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:51:00.792 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:51:00.797 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:51:00.799 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - 204 null null 23.566ms
2025-07-29 23:51:00.804 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:51:00.827 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:51:00.836 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:51:00.844 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:51:00.849 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - 401 0 null 64.631ms
2025-07-29 23:51:00.864 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:51:00.873 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:51:00.879 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:51:00.896 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:51:00.903 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:51:00.910 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:51:00.912 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - 401 0 null 47.9065ms
2025-07-29 23:55:38.351 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:55:38.356 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:55:38.356 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:55:38.358 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:55:38.359 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - 204 null null 8.4389ms
2025-07-29 23:55:38.360 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5143/api/log?page=1&pageSize=50 - 204 null null 4.9366ms
2025-07-29 23:55:38.364 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:55:38.370 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:55:38.371 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:55:38.373 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:55:38.374 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:55:38.375 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:55:38.376 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - 401 0 null 11.9413ms
2025-07-29 23:55:38.379 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - null null
2025-07-29 23:55:38.381 +03:00 [INF] CORS policy execution successful.
2025-07-29 23:55:38.382 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-29 23:55:38.384 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: '4HC1LhKBH43tdYX5ai9npA2SzgJyZ9Lzos7wuCidpUk'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-07-29 23:55:38.385 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-29 23:55:38.386 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-29 23:55:38.387 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/log?page=1&pageSize=50 - 401 0 null 7.9969ms
